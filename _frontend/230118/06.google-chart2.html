<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<link rel="icon" href="/assets/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
#piechart {
    height: 100vh;
}    
</style>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-4">
            <div class="input-group my-3">
                <span class="input-group-text">Task</span>
                <input type="text" name="task1" class="form-control" placeholder="할일">
                <span class="input-group-text">시간</span>
                <input type="number" name="hour1" class="form-control" placeholder="시간" min="0">
            </div>
            <div class="input-group my-3">
                <span class="input-group-text">Task</span>
                <input type="text" name="task2" class="form-control" placeholder="할일">
                <span class="input-group-text">시간</span>
                <input type="number" name="hour2" class="form-control" placeholder="시간" min="0">
            </div>
            <div class="input-group my-3">
                <span class="input-group-text">Task</span>
                <input type="text" name="task3" class="form-control" placeholder="할일">
                <span class="input-group-text">시간</span>
                <input type="number" name="hour3" class="form-control" placeholder="시간" min="0">
            </div>
            <div class="input-group my-3">
                <span class="input-group-text">Task</span>
                <input type="text" name="task4" class="form-control" placeholder="할일">
                <span class="input-group-text">시간</span>
                <input type="number" name="hour4" class="form-control" placeholder="시간" min="0">
            </div>
            <div class="input-group my-3">
                <span class="input-group-text">Task</span>
                <input type="text" name="task5" class="form-control" placeholder="할일">
                <span class="input-group-text">시간</span>
                <input type="number" name="hour5" class="form-control" placeholder="시간" min="0">
            </div>
            <div class="d-grid gap-2">
                <button class="btn btn-primary" type="button">그리기</button>
            </div>
        </div>
        <div class="col-8">
            <div id="piechart"></div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    google.charts.load('current', {'packages':['corechart']});
    // google.charts.setOnLoadCallback(drawChart);

    $('.btn-primary').click(function(){
        let dataTable = [['Task', 'Hours per Day']];

        for(let i=0; i < 5; i++){
            let arr = []; 
            let task = $(`input[name="task${i+1}"]`).val();
            let hour = parseInt($(`input[name="hour${i+1}"]`).val());
            arr.push(task, hour);

            dataTable.push(arr);
        }

        // console.log(dataTable);
        drawChart(dataTable);
    });

    function drawChart(dataTable) {
        var data = google.visualization.arrayToDataTable(dataTable);

        var options = {
            title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
    }
</script>
</body>
</html>